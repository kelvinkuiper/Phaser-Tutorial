<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <script src="phaser.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {
    
        //create Phaser game, width, height, context, id, callbacks
        var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });

        
        var player;
        var platforms;
        var platform;
        var platform2;
        var star;

        var gravity = 200;

        var jumpButton;

       
        function preload () {
            game.load.image('sky', 'assets/dude/sky.png');
            game.load.image('ground', 'assets/dude/platform.png');
            game.load.image('star', 'assets/dude/star.png');
            game.load.spritesheet('dude', 'assets/dude/dude.png', 32, 48);
        }

        function create () {
            game.physics.startSystem(Phaser.Physics.ARCADE);
            cursors = game.input.keyboard.createCursorKeys();

            jumpButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);

            game.world.setBounds(0, 0, 2000, 600);
            
            //lucht
            game.add.sprite(0, 0, 'sky');
             game.add.sprite(800, 0, 'sky');

            //platformen toevioegen in groep platforms
            platforms = game.add.group();

            platform = platforms.create(0, 100, 'ground');
            game.physics.arcade.enable(platform);
            platform.body.immovable = true;

            platform2 = platforms.create(0, 200, 'ground');
            game.physics.arcade.enable(platform2);
            platform2.body.immovable = true;

             platform3 = platforms.create(400, 200, 'ground');
            game.physics.arcade.enable(platform3);
            platform3.body.immovable = true;

            platform4 = platforms.create(600, 200, 'ground');
            game.physics.arcade.enable(platform4);
            platform4.body.immovable = true;

            platform5 = platforms.create(800, 200, 'ground');
            game.physics.arcade.enable(platform5);
            platform5.body.immovable = true;

            //player toevoegen
            player = game.add.sprite(0, 20, 'dude');
            player.animations.add('left', [0, 1, 2, 3], 10, true);
            player.animations.add('right', [5, 6, 7, 8], 10, true);

            game.physics.arcade.enable(player);
            player.body.gravity.y = gravity;

            jumpButton.onDown.add(function(){
                if(player.body.touching.down) {
                    player.body.velocity.y = - 100; 
                }
            });

            
            //ster
            star = game.add.sprite(140, 0, 'star');
            game.physics.arcade.enable(star);
            star.body.gravity.y = gravity;


            //camera config

            
        }

        function update () {
            game.camera.follow(player);
            game.physics.arcade.collide(platforms, star);

            game.physics.arcade.collide(platforms, player);

            player.body.velocity.x = 0;


            if(cursors.right.isDown) {
                player.animations.play('right');
                player.body.velocity.x = 100;
            }
            else if(cursors.left.isDown) {
                player.animations.play('left');
                player.body.velocity.x = -100;
            }
            else {
                player.animations.stop();
            }

            


               
        }

        var playerHitsStar = function (player, star) {
            
        }


        var playerHitsPlatform = function (player, platform) {
            
        }

    };
    </script>

    </body>
</html>